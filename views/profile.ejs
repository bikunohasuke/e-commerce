<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('partials/head'); %>
</head>
<body class="container-fluid">
    <nav class="navbar navbar-expand-lg bg-dark navbar-light d-none d-lg-block" id="templatemo_nav_top">
        <div class="container text-light">
            Vietnam Supplement Store System
        </div>
    </nav>
    
    <header>
        <%- include('partials/header'); %>
    </header>

    <div class="container py-5">
        <h2 class="text-center mb-4">Your Profile</h2>

        <div class="profile-info">
            <h3>Personal Information</h3>
            <p><strong>Full Name:</strong> <%= user.fullName %></p>
            <p><strong>Username:</strong> <%= user.username %></p>
            <p><strong>Email:</strong> <%= user.email %></p>
            <p><strong>Phone Number:</strong> <%= user.phone %></p>
            <p><strong>Address:</strong> <%= user.address %></p>

            <button class="btn btn-warning" data-bs-toggle="modal" data-bs-target="#editModal" onclick="populateEditForm()">Edit</button>
        </div>

        <hr>
    </div>

    <div class="modal fade" id="editModal" tabindex="-1" aria-labelledby="editModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editModalLabel">Edit Profile</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form method="POST" action="/profile">
                        <input type="hidden" name="id" value="<%= user._id %>">

                        <div class="mb-3">
                            <label for="editFullName" class="form-label">Full Name</label>
                            <input type="text" class="form-control" id="editFullName" name="fullName" value="<%= user.fullName %>">
                        </div>

                        <div class="mb-3">
                            <label for="editUsername" class="form-label">Username</label>
                            <input type="text" class="form-control" id="editUsername" name="username" value="<%= user.username %>" required>
                        </div>

                        <div class="mb-3">
                            <label for="editPhone" class="form-label">Phone Number</label>
                            <input type="text" class="form-control" id="editPhone" name="phone" value="<%= user.phone %>" required>
                        </div>

                        <div class="mb-3">
                            <label for="editAddress" class="form-label">Address</label>
                            <input type="text" class="form-control" id="editAddress" name="address" value="<%= user.address %>" required>
                        </div>

                        <button type="submit" class="btn btn-warning">Save Changes</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <footer class="bg-dark" id="tempaltemo_footer">
        <%- include('partials/footer'); %>
    </footer>

    <%- include('partials/script'); %>

    <script>
        function populateEditForm() {
            document.getElementById('editFullName').value = "<%= user.fullName %>";
            document.getElementById('editPhone').value = "<%= user.phone %>";
            document.getElementById('editAddress').value = "<%= user.address %>";
        }
    </script>

</body>
</html>